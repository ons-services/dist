(()=>{var e={128:()=>{var e=document.getElementById("togglePassword"),t=document.getElementById("password");e&&t&&e.addEventListener("click",function(){var e="password"===t.getAttribute("type")?"text":"password";t.setAttribute("type",e),this.classList.toggle("bi-eye"),this.classList.toggle("bi-eye-slash")})},163:(e,t)=>{"use strict";function n(e){var t=document.getElementById(e+"-modal");t?new bootstrap.Modal(t).show():fetch("/logic_n_design/centralized_hub/content_grabber/php_grabbers/fetch_g_modals.php?modal=".concat(encodeURIComponent(e))).then(function(t){if(!t.ok)throw new Error('Failed to load modal "'.concat(e,'" (status ').concat(t.status,")"));return t.text()}).then(function(e){var t=document.getElementById("dynamic-modal-container");if(t){t.innerHTML=e;var n=t.querySelector(".modal");n?new bootstrap.Modal(n).show():console.error("Loaded modal does not contain .modal element.")}else console.error("Modal container element (#dynamic-modal-container) not found in DOM.")}).catch(function(t){console.error("Error loading modal:",t),alert('Could not load modal "'.concat(e,'". Please try again later.'))})}Object.defineProperty(t,"__esModule",{value:!0}),t.loadAndShowModal=n,"undefined"!=typeof window&&(window.loadAndShowModal=n)},361:()=>{document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".scroll-to-top");e&&(window.addEventListener("scroll",function(){window.scrollY>200?e.classList.remove("d-none"):e.classList.add("d-none")}),e.addEventListener("click",function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}))})},406:()=>{document.addEventListener("DOMContentLoaded",function(){var e,t=document.getElementById("sidebar-wrapper"),n=document.getElementById("sidebarToggle"),o=document.getElementById("sidebarToggleMobile"),i=document.getElementById("content-wrapper"),a=document.body;function d(){window.innerWidth>=768?(t.classList.remove("show-mobile"),a.classList.remove("overflow-hidden"),"true"===localStorage.getItem("sidebarCollapsed")?(t.classList.add("collapsed"),i.classList.add("expanded-content"),n&&n.querySelector("i").classList.replace("bi-chevron-left","bi-chevron-right")):(t.classList.remove("collapsed"),i.classList.remove("expanded-content"),n&&n.querySelector("i").classList.replace("bi-chevron-right","bi-chevron-left"))):(t.classList.remove("collapsed"),t.classList.remove("show-mobile"),i.classList.remove("expanded-content"),a.classList.remove("overflow-hidden"))}n&&n.addEventListener("click",function(){var e=t.classList.toggle("collapsed");if(i.classList.toggle("expanded-content"),n){var o=n.querySelector("i");e?(o.classList.replace("bi-chevron-left","bi-chevron-right"),localStorage.setItem("sidebarCollapsed","true")):(o.classList.replace("bi-chevron-right","bi-chevron-left"),localStorage.removeItem("sidebarCollapsed"))}}),o&&o.addEventListener("click",function(){t.classList.toggle("show-mobile"),a.classList.toggle("overflow-hidden"),t.classList.contains("show-mobile")&&(t.classList.remove("collapsed"),i.classList.remove("expanded-content"))}),d(),window.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(function(){d()},1e3)})})},495:()=>{document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("profileTabs"),t=document.getElementById("settingsHeading");if(e&&t){var n={"account-tab":"Account Settings","profile-tab":"Profile Settings","security-tab":"Security Settings","customization-tab":"Customized Settings","public-appearance-tab":"Public Profile","admin-console-tab":"Admin Console"};e.addEventListener("shown.bs.tab",function(e){i(e.target.id)});var o=e.querySelector(".nav-link.active");o&&i(o.id)}function i(e){t.textContent=n[e]||"Settings"}})},578:()=>{document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("themeSwitch"),t=document.getElementById("primaryThemeLink"),n=document.getElementById("customThemeToast"),o=document.documentElement,i=n?new bootstrap.Modal(n):null;function a(){i&&(i.show(),setTimeout(function(){i.hide()},4e3))}function d(t){if(o.setAttribute("data-bs-theme",t),localStorage.setItem("aarya-theme",t),!e.classList.contains("disabled-toggle")){e.checked="dark"===t;var n=e.nextElementSibling;n&&(n.textContent="dark"===t?"Dark Mode":"Light Mode")}}if(d(localStorage.getItem("aarya-theme")||"dark"),function(){if(e)if(t&&!t.href.includes("aarya-original-base.css")){e.classList.add("disabled-toggle"),e.checked=!1;var n=e.nextElementSibling;n&&(n.textContent="Custom Theme")}else e.classList.remove("disabled-toggle"),d(localStorage.getItem("aarya-theme")||"dark")}(),e){e.addEventListener("change",function(){e.classList.contains("disabled-toggle")?(a(),e.checked=!1):d(this.checked?"dark":"light")});var l=e.nextElementSibling;l&&l.addEventListener("click",function(t){e.classList.contains("disabled-toggle")&&(t.preventDefault(),a())})}})},795:()=>{document.addEventListener("DOMContentLoaded",function(){var e,t=document.getElementById("wrapper"),n=document.getElementById("access-denied-message");function o(){window.innerWidth<992?(t&&t.classList.add("d-none"),n.classList.remove("d-none"),document.body.style.overflow="hidden"):(t&&t.classList.remove("d-none"),n.classList.add("d-none"),document.body.style.overflow="")}n||((n=document.createElement("div")).id="access-denied-message",n.innerHTML='\n            <img src="../../structural_beam/images/logo/logo.png" alt="Aarya Logo" style="width: 100px; height: 80px; margin-bottom: 20px;">\n            <h1 style="font-size: 2.5em; margin-bottom: 10px;">Access Restricted</h1>\n            <p style="font-size: 1.1em; max-width: 600px; color: #adb5bd;">\n                For optimal performance and security, the Aarya Dashboard is currently only accessible on desktop computers.\n                Please use a device with a screen width of '.concat(992,' pixels or greater.\n            </p>\n            <p style="font-size: 0.9em; color: #adb5bd;">\n                Reflecting ONS principles of trust and honesty, Aarya aims to provide reliable support.\n            </p>\n        '),document.body.appendChild(n)),n.style.cssText="\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        min-height: 100vh;\n        text-align: center;\n        font-family: 'Poppins', sans-serif;\n        background-color: var(--bg-main, #212529); /* Use CSS var for theme, fallback */\n        color: var(--bs-body-color, #f8f9fa); /* Use CSS var for theme, fallback */\n        padding: 20px;\n        position: fixed; /* Overlay on top */\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        z-index: 9999; /* Ensure it's on top of everything */\n    ",o(),window.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(o,100)})})},975:()=>{var e,t,n,o,i=document.title,a=[{type:"1st Break",duration:25,start:null}],d=0;a.forEach(function(e){d+=e.duration});var l=document.getElementById("shiftDetailsModal"),s=document.getElementById("timeSinceLoginDisplay"),r=document.getElementById("breaksAvailedDisplay"),c=document.getElementById("breaksAvailableDisplay"),m=document.getElementById("timeToLogoutDisplay");function u(e){e<0&&(e=0);var t=Math.floor(e/1e3);return[Math.floor(t/3600),Math.floor(t%3600/60),t%60].map(function(e){return e<10?"0"+e:e}).join(":")}function g(){clearTimeout(e),clearTimeout(t),document.title=i,n&&(n.style.display="none"),t=setTimeout(function(){(n=document.getElementById("inactivityModal"))?n.style.display="block":(console.error("inactivityModal is NULL inside showInactivityWarningModal() at:",(new Date).toLocaleTimeString()),p(),(n=document.getElementById("inactivityModal"))&&(n.style.display="block"))},78e4),e=setTimeout(f,9e5)}function f(){n&&(n.style.display="none"),clearTimeout(e),clearTimeout(t),document.onmousemove=null,document.onkeydown=null,document.onmousedown=null,document.ontouchstart=null,document.onscroll=null;var o=document.createElement("div");o.style.position="fixed",o.style.top="50%",o.style.left="50%",o.style.transform="translate(-50%, -50%)",o.style.backgroundColor="#f0f0f0",o.style.padding="20px",o.style.border="1px solid #ccc",o.style.borderRadius="5px",o.style.zIndex="1000",o.style.textAlign="center",document.body.appendChild(o);var i=120,a=function(){o.textContent="You have been logged out due to inactivity. Redirecting in ".concat(i," second").concat(1===i?"":"s","..."),i<=0?(o.remove(),window.location.href="/operations/entry_exit/logout.php"):(i--,setTimeout(a,1e3))};a()}function p(){document.getElementById("inactivityModal")||(document.body.insertAdjacentHTML("beforeend",'\n        <div id="inactivityModal" style="display: none; position: fixed; z-index: 50; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5);">\n            <div id="inactivityModalContent" style="background-color: #f8f9fa; margin: 15% auto; padding: 30px 40px; border-radius: 10px; box-shadow: 0 10px 20px rgba(0,0,0,0.2), 0 6px 6px rgba(0,0,0,0.19); width: 90%; max-width: 400px; text-align: center;">\n\n                <h2 style="font-size: 24px; font-weight: bold; color: #333333; margin-bottom: 5px;">Inactivity Detected</h2>\n                <hr style="border-top: 1px solid #ddd; margin-bottom: 20px;">\n                <p style="font-size: 16px; color: #555555; margin-bottom: 20px;">You have been inactive for a while. Please click "Continue Session" to continue.</p>\n                <p style="font-size: 14px; color: #777777; margin-bottom: 30px;">Inactivity for two more minutes will make you logout of your session</p>\n                <button id="inactivityModalOk" style="background-color: #e74c3c; color: #ffffff; padding: 10px 20px; border-radius: 5px; text-decoration: none; font-weight: bold; cursor: pointer;">Continue Session</button>\n            </div>\n        </div>\n    '),n=document.getElementById("inactivityModal"),(o=document.getElementById("inactivityModalOk"))?o.onclick=function(){n.style.display="none",g()}:console.error("inactivityModalOk element not found after re-injection"))}window.addEventListener("load",function(){var e=localStorage.getItem("loginStartTime");e?console.log("Existing loginStartTime found:",e):(e=(new Date).toISOString(),localStorage.setItem("loginStartTime",e),console.log("New loginStartTime set:",e)),l&&l.addEventListener("show.bs.modal",function(e){console.log("Shift Details Modal is about to be shown. Updating details..."),function(){var e=localStorage.getItem("loginStartTime");if(!e)return console.error("Login start time not found in localStorage."),s&&(s.textContent="N/A"),r&&(r.textContent="N/A"),c&&(c.textContent="N/A"),void(m&&(m.textContent="N/A"));var t=new Date(e),n=new Date,o=u(n.getTime()-t.getTime());s&&(s.textContent=o);var i="";d>0?(i="".concat(d," minutes"),a.length>0&&"1st Break"===a[0].type&&(i+=" (1st Break taken)")):i="None",r&&(r.textContent=i);var l=75-d,g="None";if(l>0){var f=[],p=a.some(function(e){return"1st Break"===e.type}),y=a.some(function(e){return"Food Break"===e.type});!p&&TOTAL_BREAK_ALLOWANCE_MINUTES>=25&&f.push("25 minutes (1st Break)"),!y&&TOTAL_BREAK_ALLOWANCE_MINUTES>=50&&f.push("50 minutes (Food Break)"),0===f.length&&l>0&&f.push("".concat(l," minutes (Remaining)")),g=f.join(", ")||"None"}c&&(c.textContent=g);var v=288e5+60*d*1e3,h=u(new Date(t.getTime()+v).getTime()-n.getTime());m&&(m.textContent=h)}()}),p(),document.onmousemove=function(){g()},document.onkeydown=function(){g()},document.onmousedown=function(){g()},document.ontouchstart=function(){g()},document.onscroll=function(){g()},g(),i=document.title,console.log("window.onload finished for timer.js. Inactivity system active.")})}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}(()=>{"use strict";var e=n(795),t=n(163),o=n(975),i=n(128),a=n(495),d=n(361),l=n(578),s=n(406);window.GeneralAPI={initDeviceRestriction:e.initDeviceRestriction,loadAndShowModal:t.loadAndShowModal,initGModalLoader:t.initGModalLoader,initIdleTimeCounter:o.initIdleTimeCounter,initPasswordToggler:i.initPasswordToggler,initProfileTabs:a.initProfileTabs,initScrollToTop:d.initScrollToTop,initThemeToggler:l.initThemeToggler,initSidebar:s.initSidebar},document.addEventListener("DOMContentLoaded",function(){GeneralAPI.initGModalLoader(),GeneralAPI.initProfileTabs()})})(),window.GeneralAPI={}})();
//# sourceMappingURL=general_bundle.js.map